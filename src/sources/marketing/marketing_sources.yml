version: 2

sources:
  - name: Intercom Integration #this is a classic SaaS integration
    description: "some markdown description"
    meta:
      config:
        type: intercom
        parent_id: "298528044" # also account
        start_date: "2021-07-11T12:00:00Z"
        secret: "google_analytics"
      asset_status: verified
      experts: ["person_a@y42.com", "person_b@y42.com"]
    tables:
      - name: admins
        description: "some markdown description"
        meta:
          source_config:
            columns: ["id", "type", "workspace_id", "name", "created_at"]
        columns:
          - name: "id"
            description: "unique id"
            tests:
              - unique
              - not_null
  - name: prod postgres
    description: internal production postgres database
    meta:
      import_config:
        type: postgres
        secret: 5ea112c0-60af-45d7-aff4-7fe22e7feff7
      asset_status: draft
    tables:
      - name: cdc1 # this is a readable name
        identifer: postgres-public-cdc1 #this is the name of the "import" column before, if "identifer" doesn't exist, we take "name"
        meta:
          table_import_configs:
            columns:
              [
                "id",
                "code",
                "article",
                "name",
                "lowercase",
                "uppercase",
                "mixedcase",
              ]
  - name: dbt_playground #if there are no meta.type, then we treat this source as an internal source and create a view
    database: y42-playground-a0b345c7 #this is for cross referencing database https://docs.getdbt.com/reference/resource-properties/database
    description: something
    tables:
      - name: some table
        description: whatever
        columns:
          - name: Discount
            test:
              - not_null
